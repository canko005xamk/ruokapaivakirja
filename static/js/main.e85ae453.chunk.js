(this["webpackJsonpsoveltava-harjoitustyo-canko005xamk"]=this["webpackJsonpsoveltava-harjoitustyo-canko005xamk"]||[]).push([[0],{624:function(a,t,e){"use strict";e.r(t);var i=e(0),n=e(19),r=e.n(n),c=e(51),u=e(666),s=e(70),l=e(20),o=e(63),j=e(667),b=e(670),m=e(656),O=e(87),d=e(658),h=e(659),p=e(660),k=e(661),v=e(673),f=e(663),x=e(657),g=e(139),y=e.n(g),N=e(140),T=e.n(N),A=e(7);var R=function(a){return Object(A.jsx)(O.a,{variant:"h5",align:"center",children:a.children})},w=Object(m.a)({ateriaLaatikko:{marginTop:15,border:"1px solid gray",borderRadius:4},ateriaOtsikko:{backgroundColor:"#757de8",color:"white"},ateriaNimi:{width:"70%"},ateriaAika:{width:"30%"}});var S=function(a){var t=w();return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(R,{children:"Ruokap\xe4iv\xe4kirja"}),Object(A.jsx)(O.a,{variant:"h6",align:"center",style:{marginTop:20},children:a.paiva}),Object(A.jsxs)(O.a,{variant:"h6",align:"center",children:["Yhteens\xe4 ",a.ateriat.map((function(a){return a.ruuat.reduce((function(a,t){return a+t.kalorit}),0)})).reduce((function(a,t){return a+t}),0)," kcal"]}),a.ateriat.sort((function(a,t){return Object(x.a)(a.aika,t.aika)})).map((function(a,e){var i=e+"A",n=a.ruuat.map((function(a){return a.kalorit})).reduce((function(a,t){return a+t}),0);return Object(A.jsxs)(d.a,{className:t.ateriaLaatikko,disablePadding:!0,children:[Object(A.jsxs)(h.a,{className:t.ateriaOtsikko,children:[Object(A.jsx)(p.a,{className:t.ateriaNimi,primary:a.nimi}),Object(A.jsx)(p.a,{className:t.ateriaNimi,primary:n>0?n+" kcal":""}),Object(A.jsx)(p.a,{className:t.ateriaAika,primary:Object(j.a)(a.aika,"HH:mm")}),Object(A.jsx)(k.a,{children:Object(A.jsx)(v.a,{title:"Muokkaa ateriaa",children:Object(A.jsx)(f.a,{component:s.b,to:"/muokkaa/".concat(a.id),children:Object(A.jsx)(y.a,{style:{color:"white"}})})})})]}),a.ruuat?a.ruuat.map((function(a,t){var e=t+"B";return Object(A.jsx)(h.a,{divider:!0,children:Object(A.jsx)(p.a,{primary:a.nimi,secondary:a.kalorit>0?a.kalorit+" kcal":""})},e)})):Object(A.jsx)(A.Fragment,{}),Object(A.jsx)(h.a,{children:Object(A.jsx)(k.a,{children:Object(A.jsx)(v.a,{title:"Lis\xe4\xe4 ruokia ateriaan",placement:"right",children:Object(A.jsx)(f.a,{component:s.b,to:"/lisaa/".concat(a.id),children:Object(A.jsx)(T.a,{fontSize:"small"})})})})})]},i)}))]})},L=e(62),P=e(141),B=e(160),I=e(26),C=e(669),D=e(665),H=e(668),W=e(161),E=e.n(W),J=Object(m.a)({laatikot:{marginRight:10,marginTop:20},nappi:{marginBottom:10}});var V=function(a){var t=J(),e=Object(l.f)().id,n=Object(l.e)(),r=Object(i.useRef)(),u=Object(i.useState)(),s=Object(c.a)(u,2),o=s[0],j=s[1],b=a.ateriat.filter((function(a){return a.id===e}))[0];return Object(i.useEffect)((function(){j(new Date(b.aika))}),[]),Object(A.jsxs)(I.a,{utils:P.a,locale:B.fi,children:[Object(A.jsx)(R,{children:" Muokkaa ateriaa "}),Object(A.jsxs)("form",{onSubmit:function(t){t.preventDefault();var i=a.ateriat.filter((function(a){return a.id!==e})),c={id:e,nimi:r.current.value,aika:o.getTime(),ruuat:b.ruuat};a.setAteriatTanaan({paiva:a.paiva,ateriat:[].concat(Object(L.a)(i),[c])}),n.push("/")},children:[Object(A.jsx)(d.a,{children:Object(A.jsxs)(h.a,{children:[Object(A.jsx)(C.a,{className:t.laatikot,name:"nimi",inputRef:r,variant:"outlined",label:"Aterian nimi",InputLabelProps:{shrink:!0},defaultValue:b.nimi}),Object(A.jsx)(H.a,{className:t.laatikot,inputVariant:"outlined",label:"Aika",cancelLabel:"Peruuta",ampm:!1,format:"HH:mm",value:o,onChange:j})]})}),Object(A.jsx)(D.a,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,className:t.nappi,children:"Valmis"})]}),Object(A.jsx)(D.a,{variant:"contained",fullWidth:!0,onClick:function(){n.push("/")},children:"Palaa"}),Object(A.jsxs)(d.a,{children:[b.ruuat.map((function(a,t){return Object(A.jsxs)(h.a,{children:[Object(A.jsx)(p.a,{primary:a.nimi}),Object(A.jsx)(p.a,{primary:a.kalorit+" kcal"})]},t)})),Object(A.jsx)(h.a,{children:Object(A.jsx)(k.a,{children:Object(A.jsx)(v.a,{title:"Poista ruuat",placement:"right",children:Object(A.jsx)(f.a,{onClick:function(){window.confirm("Poista kaikki ruuat?")&&function(){var t=a.ateriat.filter((function(a){return a.id!==e})),i={id:e,nimi:r.current.value,aika:o.getTime(),ruuat:[]};a.setAteriatTanaan({paiva:a.paiva,ateriat:[].concat(Object(L.a)(t),[i])})}()},children:Object(A.jsx)(E.a,{})})})})})]})]})},F=e(65),M=e(671),z=Object(m.a)({laatikot:{marginRight:10,marginTop:20,marginBottom:30,width:"47%"},nappi:{marginBottom:10}});var K=function(a){var t=z(),e=Object(l.f)().id,n=Object(l.e)(),r=Object(i.useState)(!1),u=Object(c.a)(r,2),s=u[0],o=u[1],j=Object(i.useState)({}),b=Object(c.a)(j,2),m=b[0],O=b[1],d=Object(i.useRef)(),h=Object(i.useRef)(),p=a.ateriat.filter((function(a){return a.id===e}))[0];return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(R,{children:" Lis\xe4\xe4 ruokia "}),Object(A.jsxs)("form",{onSubmit:function(t){t.preventDefault();var i={},n=Number(h.current.value);if(d.current.value||(i=Object(F.a)(Object(F.a)({},i),{},{nimi:"Anna ruuan nimi"})),isNaN(n)&&(i=Object(F.a)(Object(F.a)({},i),{},{kalorit:"Anna vain numeroita"})),Object.entries(i).length>0)O(Object(F.a)({},i));else{O({});var r=a.ateriat.filter((function(a){return a.id!==e})),c=p.ruuat.map((function(a){return a})),u={nimi:d.current.value,kalorit:Number(h.current.value)},s={id:p.id,nimi:p.nimi,aika:p.aika,ruuat:[].concat(Object(L.a)(c),[u])};a.setAteriatTanaan({paiva:a.paiva,ateriat:[].concat(Object(L.a)(r),[s])}),d.current.value="",h.current.value="",o(!0)}},children:[Object(A.jsx)(C.a,{className:t.laatikot,name:"nimi",inputRef:d,variant:"outlined",label:"Ruoka",InputLabelProps:{shrink:!0},error:Boolean(m.nimi),helperText:m.nimi}),Object(A.jsx)(C.a,{className:t.laatikot,name:"kalorit",inputRef:h,variant:"outlined",label:"Kalorit",InputLabelProps:{shrink:!0},error:Boolean(m.kalorit),helperText:m.kalorit}),Object(A.jsx)(D.a,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,className:t.nappi,children:"Lis\xe4\xe4"})]}),Object(A.jsx)(D.a,{variant:"contained",fullWidth:!0,onClick:function(){n.push("/")},children:"Palaa"}),Object(A.jsx)(M.a,{message:"Ruoka lis\xe4tty",open:s,onClose:function(){o(!1)},autoHideDuration:2e3,anchorOrigin:{vertical:"top",horizontal:"center"}})]})};var Y=function(){var a=Object(i.useState)({paiva:"",ateriat:[]}),t=Object(c.a)(a,2),e=t[0],n=t[1];return Object(i.useEffect)((function(){!function(){var a=new Date,t=Object(j.a)(a,"d.M.y"),e=JSON.parse(localStorage.getItem("ateriat/".concat(t))),i={paiva:t,ateriat:[{id:Object(o.v4)(),nimi:"Aamiainen",aika:Object(b.a)(a,{hours:8,minutes:0}).getTime(),ruuat:[]},{id:Object(o.v4)(),nimi:"Lounas",aika:Object(b.a)(a,{hours:11,minutes:0}).getTime(),ruuat:[]},{id:Object(o.v4)(),nimi:"V\xe4lipala",aika:Object(b.a)(a,{hours:14,minutes:0}).getTime(),ruuat:[]},{id:Object(o.v4)(),nimi:"P\xe4iv\xe4llinen",aika:Object(b.a)(a,{hours:17,minutes:0}).getTime(),ruuat:[]},{id:Object(o.v4)(),nimi:"Illallinen",aika:Object(b.a)(a,{hours:20,minutes:0}).getTime(),ruuat:[]}]};n(e||i)}()}),[]),Object(i.useEffect)((function(){localStorage.setItem("ateriat/".concat(e.paiva),JSON.stringify(e))}),[e]),Object(A.jsx)(u.a,{maxWidth:"xs",children:Object(A.jsxs)(s.a,{children:[Object(A.jsx)(l.a,{path:"/",exact:!0,children:Object(A.jsx)(S,{ateriat:e.ateriat,paiva:e.paiva})}),Object(A.jsx)(l.a,{path:"/muokkaa/:id",children:Object(A.jsx)(V,{ateriat:e.ateriat,paiva:e.paiva,setAteriatTanaan:n})}),Object(A.jsx)(l.a,{path:"/lisaa/:id",children:Object(A.jsx)(K,{ateriat:e.ateriat,paiva:e.paiva,setAteriatTanaan:n})})]})})};r.a.render(Object(A.jsx)(Y,{}),document.getElementById("root"))}},[[624,1,2]]]);
//# sourceMappingURL=main.e85ae453.chunk.js.map